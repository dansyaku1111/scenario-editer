{
  "version": 3,
  "sources": ["../../@babel/runtime/helpers/esm/arrayLikeToArray.js", "../../@babel/runtime/helpers/esm/arrayWithoutHoles.js", "../../@babel/runtime/helpers/esm/iterableToArray.js", "../../@babel/runtime/helpers/esm/unsupportedIterableToArray.js", "../../@babel/runtime/helpers/esm/nonIterableSpread.js", "../../@babel/runtime/helpers/esm/toConsumableArray.js", "../../src/content.ts", "../../src/utils.ts", "../../src/drag.ts", "../../src/zoom.ts", "../../src/area.ts", "../../src/base.ts", "../../src/connection-view.ts", "../../src/elements-holder.ts", "../../src/node-view.ts", "../../src/extensions/shared/utils.ts", "../../src/extensions/bounding-box.ts", "../../src/extensions/order.ts", "../../src/extensions/restrictor.ts", "../../src/extensions/selectable.ts", "../../src/extensions/show-input-control.ts", "../../src/extensions/snap.ts", "../../src/extensions/zoom-at.ts", "../../src/extensions/index.ts", "../../src/index.ts"],
  "sourcesContent": ["function _arrayLikeToArray(r, a) {\n  (null == a || a > r.length) && (a = r.length);\n  for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e];\n  return n;\n}\nexport { _arrayLikeToArray as default };", "import arrayLikeToArray from \"./arrayLikeToArray.js\";\nfunction _arrayWithoutHoles(r) {\n  if (Array.isArray(r)) return arrayLikeToArray(r);\n}\nexport { _arrayWithoutHoles as default };", "function _iterableToArray(r) {\n  if (\"undefined\" != typeof Symbol && null != r[Symbol.iterator] || null != r[\"@@iterator\"]) return Array.from(r);\n}\nexport { _iterableToArray as default };", "import arrayLikeToArray from \"./arrayLikeToArray.js\";\nfunction _unsupportedIterableToArray(r, a) {\n  if (r) {\n    if (\"string\" == typeof r) return arrayLikeToArray(r, a);\n    var t = {}.toString.call(r).slice(8, -1);\n    return \"Object\" === t && r.constructor && (t = r.constructor.name), \"Map\" === t || \"Set\" === t ? Array.from(r) : \"Arguments\" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? arrayLikeToArray(r, a) : void 0;\n  }\n}\nexport { _unsupportedIterableToArray as default };", "function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\nexport { _nonIterableSpread as default };", "import arrayWithoutHoles from \"./arrayWithoutHoles.js\";\nimport iterableToArray from \"./iterableToArray.js\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nimport nonIterableSpread from \"./nonIterableSpread.js\";\nfunction _toConsumableArray(r) {\n  return arrayWithoutHoles(r) || iterableToArray(r) || unsupportedIterableToArray(r) || nonIterableSpread();\n}\nexport { _toConsumableArray as default };", "export class Content {\n  public holder: HTMLElement\n\n  constructor(private reordered: (target: HTMLElement) => Promise<unknown>) {\n    this.holder = document.createElement('div')\n    this.holder.style.transformOrigin = '0 0'\n  }\n\n  public getPointerFrom(event: MouseEvent) {\n    const { left, top } = this.holder.getBoundingClientRect()\n    const x = event.clientX - left\n    const y = event.clientY - top\n\n    return { x, y }\n  }\n\n  add(element: HTMLElement) {\n    this.holder.appendChild(element)\n  }\n\n  // eslint-disable-next-line no-undef\n  async reorder(target: HTMLElement, next: ChildNode | null) {\n    if (!this.holder.contains(target)) {\n      throw new Error(`content doesn't have 'target' for reordering`)\n    }\n    if (next !== null && !this.holder.contains(next)) {\n      throw new Error(`content doesn't have 'next' for reordering`)\n    }\n\n    this.holder.insertBefore(target, next)\n    await this.reordered(target)\n  }\n\n  remove(element: HTMLElement) {\n    this.holder.removeChild(element)\n  }\n}\n", "import { Position, Size } from './types'\n\ntype PointerHandler = (event: PointerEvent) => void\ntype PointerListenerHandlers = {\n    down: PointerHandler\n    move: PointerHandler\n    up: PointerHandler\n}\n\nexport type PointerListener = { destroy: () => void }\n\n/**\n * listen to pointerdown, window's pointermove and pointerup events,\n * where last two not active before pointerdown triggered for performance reasons\n */\nexport function usePointerListener(element: HTMLElement, handlers: PointerListenerHandlers): PointerListener {\n  const move: PointerHandler = (event) => {\n    handlers.move(event)\n  }\n  const up: PointerHandler = (event) => {\n    window.removeEventListener('pointermove', move)\n    window.removeEventListener('pointerup', up)\n    window.removeEventListener('pointercancel', up)\n    handlers.up(event)\n  }\n  const down: PointerHandler = (event) => {\n    window.addEventListener('pointermove', move)\n    window.addEventListener('pointerup', up)\n    window.addEventListener('pointercancel', up)\n    handlers.down(event)\n  }\n\n  element.addEventListener('pointerdown', down)\n\n  return {\n    destroy() {\n      element.removeEventListener('pointerdown', down)\n      window.removeEventListener('pointermove', move)\n      window.removeEventListener('pointerup', up)\n      window.removeEventListener('pointercancel', up)\n    }\n  }\n}\n\n/**\n * Bounding box\n */\nconst min = (arr: number[]) => arr.length === 0 ? 0 : Math.min(...arr)\nconst max = (arr: number[]) => arr.length === 0 ? 0 : Math.max(...arr)\n\nexport function getBoundingBox(rects: ({ position: Position } & Size)[]) {\n  const left = min(rects.map(rect => rect.position.x))\n  const top = min(rects.map(rect => rect.position.y))\n  const right = max(rects.map(rect => rect.position.x + rect.width))\n  const bottom = max(rects.map(rect => rect.position.y + rect.height))\n\n  return {\n    left,\n    right,\n    top,\n    bottom,\n    width: Math.abs(left - right),\n    height: Math.abs(top - bottom),\n    center: {\n      x: (left + right) / 2,\n      y: (top + bottom) / 2\n    }\n  }\n}\n", "import { Position } from './types'\nimport { PointerListener, usePointerListener } from './utils'\n\ntype Events = {\n  start: (e: PointerEvent) => void\n  translate: (x: number, y: number, e: PointerEvent) => void\n  drag: (e: PointerEvent) => void\n}\n\ntype Guards = {\n  down: (e: PointerEvent) => boolean\n  move: (e: PointerEvent) => boolean\n}\n\ntype DragConfig = {\n  getCurrentPosition: () => Position\n  getZoom: () => number\n}\n\n/**\n * Drag handler, used to handle dragging of the area and nodes. Can be extended to add custom behavior.\n */\nexport class Drag {\n  private pointerStart?: Position\n  private startPosition?: Position\n  private pointerListener!: PointerListener\n  protected config!: DragConfig\n  protected events!: Events\n  protected guards: Guards\n\n  constructor(guards?: Guards) {\n    this.guards = guards || {\n      down: e => !(e.pointerType === 'mouse' && e.button !== 0),\n      move: () => true\n    }\n  }\n\n  public initialize(element: HTMLElement, config: DragConfig, events: Events) {\n    this.config = config\n    this.events = events\n    element.style.touchAction = 'none'\n    this.pointerListener = usePointerListener(element, {\n      down: this.down,\n      move: this.move,\n      up: this.up\n    })\n  }\n\n  private down = (e: PointerEvent) => {\n    if (!this.guards.down(e)) return\n\n    e.stopPropagation()\n    this.pointerStart = { x: e.pageX, y: e.pageY }\n    this.startPosition = { ...this.config.getCurrentPosition() }\n\n    this.events.start(e)\n  }\n\n  private move = (e: PointerEvent) => {\n    if (!this.pointerStart || !this.startPosition) return\n    if (!this.guards.move(e)) return\n    e.preventDefault()\n\n    const delta = {\n      x: e.pageX - this.pointerStart.x,\n      y: e.pageY - this.pointerStart.y\n    }\n    const zoom = this.config.getZoom()\n    const x = this.startPosition.x + delta.x / zoom\n    const y = this.startPosition.y + delta.y / zoom\n\n    this.events.translate(x, y, e)\n  }\n\n  private up = (e: PointerEvent) => {\n    if (!this.pointerStart) return\n\n    delete this.pointerStart\n    this.events.drag(e)\n  }\n\n  public destroy() {\n    this.pointerListener.destroy()\n  }\n}\n", "\n/**\n * Zoom source\n */\nexport type ZoomSource = 'wheel' | 'touch' | 'dblclick'\nexport type OnZoom = (delta: number, ox: number, oy: number, source?: ZoomSource) => void\n\n/**\n * Zoom class, used to handle zooming of the area. Can be extended to add custom behavior.\n * @internal\n */\nexport class Zoom {\n  protected previous: { cx: number, cy: number, distance: number } | null = null\n  protected pointers: PointerEvent[] = []\n  protected container!: HTMLElement\n  protected element!: HTMLElement\n  protected onzoom!: OnZoom\n\n  constructor(protected intensity: number) { }\n\n  public initialize(container: HTMLElement, element: HTMLElement, onzoom: OnZoom) {\n    this.container = container\n    this.element = element\n    this.onzoom = onzoom\n    this.container.addEventListener('wheel', this.wheel)\n    this.container.addEventListener('pointerdown', this.down)\n    this.container.addEventListener('dblclick', this.dblclick)\n\n    window.addEventListener('pointermove', this.move)\n    window.addEventListener('pointerup', this.up)\n    window.addEventListener('pointercancel', this.up)\n  }\n\n  protected wheel = (e: WheelEvent) => {\n    e.preventDefault()\n\n    const { left, top } = this.element.getBoundingClientRect()\n    const isNegative = e.deltaY < 0\n    const delta = isNegative ? this.intensity : - this.intensity\n    const ox = (left - e.clientX) * delta\n    const oy = (top - e.clientY) * delta\n\n    this.onzoom(delta, ox, oy, 'wheel')\n  }\n\n  private getTouches() {\n    const e = { touches: this.pointers }\n    const [x1, y1] = [e.touches[0].clientX, e.touches[0].clientY]\n    const [x2, y2] = [e.touches[1].clientX, e.touches[1].clientY]\n\n    const distance = Math.sqrt(Math.pow(x1 - x2, 2) + Math.pow(y1 - y2, 2))\n\n    return {\n      cx: (x1 + x2) / 2,\n      cy: (y1 + y2) / 2,\n      distance\n    }\n  }\n\n  protected down = (e: PointerEvent) => {\n    this.pointers.push(e)\n  }\n\n  protected move = (e: PointerEvent) => {\n    this.pointers = this.pointers.map(p => p.pointerId === e.pointerId ? e : p)\n    if (!this.isTranslating()) return\n\n    const { left, top } = this.element.getBoundingClientRect()\n    const { cx, cy, distance } = this.getTouches()\n\n    if (this.previous !== null) {\n      const delta = distance / this.previous.distance - 1\n\n      const ox = (left - cx) * delta\n      const oy = (top - cy) * delta\n\n      this.onzoom(delta, ox - (this.previous.cx - cx), oy - (this.previous.cy - cy), 'touch')\n    }\n    this.previous = { cx, cy, distance }\n  }\n\n  protected up = (e: PointerEvent) => {\n    this.previous = null\n    this.pointers = this.pointers.filter(p => p.pointerId !== e.pointerId)\n  }\n\n  protected dblclick = (e: MouseEvent) => {\n    e.preventDefault()\n\n    const { left, top } = this.element.getBoundingClientRect()\n    const delta = 4 * this.intensity\n\n    const ox = (left - e.clientX) * delta\n    const oy = (top - e.clientY) * delta\n\n    this.onzoom(delta, ox, oy, 'dblclick')\n  }\n\n  public isTranslating() { // is translating while zoom (works on multitouch)\n    return this.pointers.length >= 2\n  }\n\n  public destroy() {\n    this.container.removeEventListener('wheel', this.wheel)\n    this.container.removeEventListener('pointerdown', this.down)\n    this.container.removeEventListener('dblclick', this.dblclick)\n\n    window.removeEventListener('pointermove', this.move)\n    window.removeEventListener('pointerup', this.up)\n    window.removeEventListener('pointercancel', this.up)\n  }\n}\n", "import { Content } from './content'\nimport { Drag } from './drag'\nimport { Position } from './types'\nimport { Zoom, ZoomSource } from './zoom'\n\nexport type Transform = Position & { k: number }\nexport type TranslateEventParams = { previous: Transform, position: Position }\nexport type ZoomEventParams = { previous: Transform, zoom: number, source?: ZoomSource }\n\ntype Events = {\n  zoomed: (params: ZoomEventParams) => Promise<unknown>\n  pointerDown: (position: Position, event: PointerEvent) => void\n  pointerMove: (position: Position, event: PointerEvent) => void\n  pointerUp: (position: Position, event: PointerEvent) => void\n  resize: (event: Event) => void\n  translated: (params: TranslateEventParams) => Promise<unknown>\n  reordered: (element: HTMLElement) => Promise<unknown>\n}\ntype Guards = {\n  translate: (params: TranslateEventParams) => Promise<unknown | boolean>\n  zoom: (params: ZoomEventParams) => Promise<unknown | boolean>\n}\n\nexport class Area {\n  public transform: Transform = { k: 1, x: 0, y: 0 }\n  public pointer: Position = { x: 0, y: 0 }\n  public content: Content\n\n  private zoomHandler: Zoom | null = null\n  private dragHandler: Drag | null = null\n\n  constructor(private container: HTMLElement, private events: Events, private guards: Guards) {\n    this.content = new Content(element => this.events.reordered(element))\n    this.content.holder.style.transformOrigin = '0 0'\n\n    this.setZoomHandler(new Zoom(0.1))\n    this.setDragHandler(new Drag())\n\n    this.container.addEventListener('pointerdown', this.pointerdown)\n    this.container.addEventListener('pointermove', this.pointermove)\n    window.addEventListener('pointerup', this.pointerup)\n    window.addEventListener('resize', this.resize)\n\n    container.appendChild(this.content.holder)\n    this.update()\n  }\n\n  private update() {\n    const { x, y, k } = this.transform\n\n    this.content.holder.style.transform = `translate(${x}px, ${y}px) scale(${k})`\n  }\n\n  /**\n   * Drag handler. Destroy previous drag handler if exists.\n   * @param drag drag handler\n   * @example area.area.setDragHandler(null) // disable drag\n   */\n  public setDragHandler(drag: Drag | null) {\n    if (this.dragHandler) this.dragHandler.destroy()\n    this.dragHandler = drag\n    if (this.dragHandler) this.dragHandler.initialize(\n      this.container,\n      {\n        getCurrentPosition: () => this.transform,\n        getZoom: () => 1\n      },\n      {\n        start: () => null,\n        translate: this.onTranslate,\n        drag: () => null\n      }\n    )\n  }\n\n  /**\n   * Set zoom handler. Destroy previous zoom handler if exists.\n   * @param zoom zoom handler\n   * @example area.area.setZoomHandler(null) // disable zoom\n   */\n  public setZoomHandler(zoom: Zoom | null) {\n    if (this.zoomHandler) this.zoomHandler.destroy()\n    this.zoomHandler = zoom\n    if (this.zoomHandler) this.zoomHandler.initialize(this.container, this.content.holder, this.onZoom)\n  }\n\n  public setPointerFrom(event: MouseEvent) {\n    const { x, y } = this.content.getPointerFrom(event)\n    const { k } = this.transform\n\n    this.pointer = { x: x / k, y: y / k }\n  }\n\n  private pointerdown = (event: PointerEvent) => {\n    this.setPointerFrom(event)\n    this.events.pointerDown(this.pointer, event)\n  }\n\n  private pointermove = (event: PointerEvent) => {\n    this.setPointerFrom(event)\n    this.events.pointerMove(this.pointer, event)\n  }\n\n  private pointerup = (event: PointerEvent) => {\n    this.setPointerFrom(event)\n    this.events.pointerUp(this.pointer, event)\n  }\n\n  private resize = (event: Event) => {\n    this.events.resize(event)\n  }\n\n  private onTranslate = (x: number, y: number) => {\n    if (this.zoomHandler && this.zoomHandler.isTranslating()) return // lock translation while zoom on multitouch\n    this.translate(x, y)\n  }\n\n  private onZoom = (delta: number, ox: number, oy: number, source?: ZoomSource) => {\n    this.zoom(this.transform.k * (1 + delta), ox, oy, source)\n\n    this.update()\n  }\n\n  /**\n   * Change position of the area\n   * @param x desired x coordinate\n   * @param y desired y coordinate\n   * @returns true if the translation was successful, false otherwise\n   * @emits translate\n   * @emits translated\n   */\n  public async translate(x: number, y: number) {\n    type T = undefined | { data: TranslateEventParams }\n    const position = { x, y }\n    const result = await this.guards.translate({ previous: this.transform, position }) as T\n\n    if (!result) return false\n\n    this.transform.x = result.data.position.x\n    this.transform.y = result.data.position.y\n\n    this.update()\n\n    await this.events.translated(result.data)\n    return true\n  }\n\n  /**\n   * Change zoom level of the area\n   * @param zoom new zoom level\n   * @param ox x coordinate of the origin of the zoom\n   * @param oy y coordinate of the origin of the zoom\n   * @param source source of the zoom\n   * @returns true if the zoom was successful, false otherwise\n   * @emits zoom\n   * @emits zoomed\n   */\n  public async zoom(zoom: number, ox = 0, oy = 0, source?: ZoomSource) {\n    type T = undefined | { data: ZoomEventParams }\n    const k = this.transform.k\n    const result = await this.guards.zoom({ previous: this.transform, zoom, source }) as T\n\n    if (!result) return true\n\n    const d = (k - result.data.zoom) / ((k - zoom) || 1)\n\n    this.transform.k = result.data.zoom || 1\n    this.transform.x += ox * d\n    this.transform.y += oy * d\n\n    this.update()\n\n    await this.events.zoomed(result.data)\n    return false\n  }\n\n  public destroy() {\n    this.container.removeEventListener('pointerdown', this.pointerdown)\n    this.container.removeEventListener('pointermove', this.pointermove)\n    window.removeEventListener('pointerup', this.pointerup)\n    window.removeEventListener('resize', this.resize)\n    if (this.dragHandler) this.dragHandler.destroy()\n    if (this.zoomHandler) this.zoomHandler.destroy()\n    this.content.holder.innerHTML = ''\n  }\n}\n", "import { BaseSchemes, ConnectionId, NodeId, Root, Scope } from 'rete'\n\nimport { NodeResizeEventParams, NodeTranslateEventParams } from './node-view'\nimport { GetRenderTypes, Position, RenderSignal } from './types'\n\ninterface NodeView {\n  element: HTMLElement\n  position: Position\n  translate(x: number, y: number): Promise<boolean>\n  resize(width: number, height: number): Promise<boolean>\n}\n\ninterface ConnectionView {\n  element: HTMLElement\n}\n\ninterface Content {\n  holder: HTMLElement\n  add(element: HTMLElement): void\n  // eslint-disable-next-line no-undef\n  reorder(target: HTMLElement, next: ChildNode | null): void\n  remove(element: HTMLElement): void\n}\n\ninterface Area {\n  pointer: Position\n  content: Content\n}\n\n/**\n * A union of all possible signals that can be emitted by any area plugin\n * @priority 10\n */\nexport type BaseArea<Schemes extends BaseSchemes> =\n  | { type: 'nodepicked', data: { id: string } }\n  | { type: 'nodedragged', data: Schemes['Node'] }\n  | { type: 'nodetranslate', data: { id: string } & NodeTranslateEventParams }\n  | { type: 'nodetranslated', data: { id: string } & NodeTranslateEventParams }\n  | { type: 'contextmenu', data: { event: MouseEvent, context: 'root' | Schemes['Node'] | Schemes['Connection'] } }\n  | { type: 'pointerdown', data: { position: Position, event: PointerEvent } }\n  | { type: 'pointermove', data: { position: Position, event: PointerEvent } }\n  | { type: 'pointerup', data: { position: Position, event: PointerEvent } }\n  | { type: 'noderesize', data: { id: string } & NodeResizeEventParams }\n  | { type: 'noderesized', data: { id: string } & NodeResizeEventParams }\n  | RenderSignal<'node', { payload: Schemes['Node'] }>\n  | RenderSignal<'connection', { payload: Schemes['Connection'], start?: Position, end?: Position }>\n  | { type: 'unmount', data: { element: HTMLElement } }\n  | { type: 'reordered', data: { element: HTMLElement } }\n\n/**\n * Base abstract class for area plugins that provides a common interface\n * @abstract\n */\nexport abstract class BaseAreaPlugin<Schemes extends BaseSchemes, Signals> extends Scope<Signals, [Root<Schemes>]> {\n  public abstract nodeViews: Map<NodeId, NodeView>\n  public abstract connectionViews: Map<ConnectionId, ConnectionView>\n  public abstract area: Area\n\n  abstract addNodeView(connection: Schemes['Node']): NodeView\n  abstract removeNodeView(connection: NodeId): void\n  abstract addConnectionView(connection: Schemes['Connection']): ConnectionView\n  abstract removeConnectionView(connection: ConnectionId): void\n  abstract update(type: GetRenderTypes<Signals>, id: string): Promise<void | boolean | undefined>\n  abstract resize(id: NodeId, width: number, height: number): Promise<void | boolean | undefined>\n  abstract translate(id: NodeId, position: Position): Promise<void | boolean | undefined>\n  abstract destroy(): void\n}\n", "\ntype Events = {\n  contextmenu: (event: MouseEvent) => void\n}\n\nexport class ConnectionView {\n  element: HTMLElement\n\n  constructor(events: Events) {\n    this.element = document.createElement('div')\n\n    this.element.style.position = 'absolute'\n    this.element.style.left = '0'\n    this.element.style.top = '0'\n    this.element.addEventListener('contextmenu', event => events.contextmenu(event))\n  }\n}\n", "\nexport class ElementsHolder<E extends HTMLElement, Ctx extends { type: string, element: E, payload?: { id: string } }> {\n  views = new WeakMap<E, Ctx>()\n  viewsElements = new Map<`${string}_${string}`, E>()\n\n  public set(context: Ctx) {\n    const { element, type, payload } = context\n\n    if (payload?.id) {\n      this.views.set(element, context)\n      this.viewsElements.set(`${type}_${payload.id}`, element)\n    }\n  }\n\n  public get(type: string, id: string) {\n    const element = this.viewsElements.get(`${type}_${id}`)\n\n    return element && this.views.get(element)\n  }\n\n  public delete(element: E) {\n    const view = this.views.get(element)\n\n    if (view && view.payload?.id) {\n      this.views.delete(element)\n      this.viewsElements.delete(`${view.type}_${view.payload.id}`)\n    }\n  }\n}\n", "import { Drag } from './drag'\nimport { Position, Size } from './types'\n\nexport type NodeTranslateEventParams = { position: Position, previous: Position }\nexport type NodeResizeEventParams = { size: Size }\n\ntype Events = {\n  picked: () => void\n  translated: (params: NodeTranslateEventParams) => Promise<unknown | boolean>\n  dragged: () => void\n  contextmenu: (event: MouseEvent) => void\n  resized: (params: NodeResizeEventParams) => Promise<unknown | boolean>\n}\ntype Guards = {\n  resize: (params: NodeResizeEventParams) => Promise<unknown | boolean>\n  translate: (params: NodeTranslateEventParams) => Promise<unknown | boolean>\n}\n\nexport class NodeView {\n  element: HTMLElement\n  position: Position\n  dragHandler: Drag\n\n  constructor(private getZoom: () => number, private events: Events, private guards: Guards) {\n    this.element = document.createElement('div')\n    this.element.style.position = 'absolute'\n    this.position = { x: 0, y: 0 }\n    this.translate(0, 0)\n\n    this.element.addEventListener('contextmenu', event => this.events.contextmenu(event))\n\n    this.dragHandler = new Drag()\n    this.dragHandler.initialize(\n      this.element,\n      {\n        getCurrentPosition: () => this.position,\n        getZoom: () => this.getZoom()\n      },\n      {\n        start: this.events.picked,\n        translate: this.translate,\n        drag: this.events.dragged\n      }\n    )\n  }\n\n  public translate = async (x: number, y: number) => {\n    type Params = undefined | { data: NodeTranslateEventParams }\n    const previous = { ...this.position }\n    const translation = await this.guards.translate({ previous, position: { x, y } }) as Params\n\n    if (!translation) return false\n\n    this.position = { ...translation.data.position }\n    this.element.style.transform = `translate(${this.position.x}px, ${this.position.y}px)`\n\n    await this.events.translated({ position: this.position, previous })\n\n    return true\n  }\n\n  public resize = async (width: number, height: number) => {\n    const size = { width, height }\n\n    if (!(await this.guards.resize({ size }))) return false\n\n    const el = this.element.children.item(0)\n\n    if (!el || !(el instanceof HTMLElement)) return false\n\n    el.style.width = `${width}px`\n    el.style.height = `${height}px`\n\n    await this.events.resized({ size })\n\n    return true\n  }\n\n  public destroy() {\n    this.dragHandler.destroy()\n  }\n}\n", "import { BaseAreaPlugin } from '../../base'\nimport { NodeView } from '../../node-view'\nimport { SchemesWithSizes } from './types'\n\nexport function getNodesRect<S extends SchemesWithSizes, K>(nodes: S['Node'][], views: BaseAreaPlugin<S, K>['nodeViews']) {\n  return nodes\n    .map(node => ({ view: views.get(node.id) as NodeView, node }))\n    .filter(item => item.view)\n    .map(({ view, node }) => {\n      const { width, height } = node\n\n      if (typeof width !== 'undefined' && typeof height !== 'undefined') {\n        return {\n          position: view.position,\n          width,\n          height\n        }\n      }\n\n      return {\n        position: view.position,\n        width: view.element.clientWidth,\n        height: view.element.clientHeight\n      }\n    })\n}\n", "import { BaseSchemes, NodeEditor } from 'rete'\n\nimport { BaseAreaPlugin } from '../base'\nimport { getBoundingBox as getBBox } from '../utils'\nimport { NodeRef } from './shared/types'\nimport { getNodesRect } from './shared/utils'\n\n/**\n * Get the bounding box of the given nodes\n * @param plugin The area plugin\n * @param nodes The nodes to get the bounding box of\n * @returns The bounding box\n */\nexport function getBoundingBox<Schemes extends BaseSchemes, K>(plugin: BaseAreaPlugin<Schemes, K>, nodes: NodeRef<Schemes>[]) {\n  const editor = plugin.parentScope<NodeEditor<Schemes>>(NodeEditor)\n  const list = nodes.map(node => typeof node === 'object' ? node : editor.getNode(node))\n  const rects = getNodesRect(list, plugin.nodeViews)\n\n  return getBBox(rects)\n}\n", "import { BaseSchemes } from 'rete'\n\nimport { BaseArea, BaseAreaPlugin } from '../base'\n\n/**\n * Simple nodes order extension\n * @param base The base area plugin\n * @listens nodepicked\n * @listens connectioncreated\n */\nexport function simpleNodesOrder<Schemes extends BaseSchemes, T>(base: BaseAreaPlugin<Schemes, T>) {\n  const area = base as BaseAreaPlugin<Schemes, BaseArea<Schemes>>\n\n  area.addPipe(context => {\n    if (!context || typeof context !== 'object' || !('type' in context)) return context\n\n    if (context.type === 'nodepicked') {\n      const view = area.nodeViews.get(context.data.id)\n      const { content } = area.area\n\n      if (view) {\n        content.reorder(view.element, null)\n      }\n    }\n    if (context.type === 'connectioncreated') {\n      const view = area.connectionViews.get(context.data.id)\n      const { content } = area.area\n\n      if (view) {\n        content.reorder(view.element, content.holder.firstChild)\n      }\n    }\n    return context\n  })\n}\n", "import { BaseSchemes } from 'rete'\n\nimport { AreaPlugin } from '..'\nimport { Position } from '../types'\n\ntype ScaleRange = { min: number, max: number }\ntype TranslateRange = { left: number, top: number, right: number, bottom: number }\n\n/**\n * Restrictor extension parameters\n */\nexport type Params = {\n  /** The scaling range */\n  scaling?: ScaleRange | (() => ScaleRange) | boolean\n  /** The translation range */\n  translation?: TranslateRange | (() => TranslateRange) | boolean\n}\n\n/**\n * Restrictor extension. Restricts the area zoom and position\n * @param plugin The area plugin\n * @param params The restrictor parameters\n * @listens zoom\n * @listens zoomed\n * @listens translated\n */\nexport function restrictor<Schemes extends BaseSchemes, K>(plugin: AreaPlugin<Schemes, K>, params?: Params) {\n  const scaling = params?.scaling\n    ? params.scaling === true ? { min: 0.1, max: 1 } : params.scaling\n    : false\n  const translation = params?.translation\n    ? params.translation === true ? { left: 0, top: 0, right: 1000, bottom: 1000 } : params.translation\n    : false\n\n  function restrictZoom(zoom: number) {\n    if (!scaling) throw new Error('scaling param isnt defined')\n    const { min, max } = typeof scaling === 'function' ? scaling() : scaling\n\n    if (zoom < min) {\n      return min\n    } else if (zoom > max) {\n      return max\n    }\n    return zoom\n  }\n\n  // eslint-disable-next-line max-statements\n  function restrictPosition(position: Position): Position {\n    if (!translation) throw new Error('translation param isnt defined')\n    const nextPosition = { ...position }\n    const { left, top, right, bottom } = typeof translation === 'function'\n      ? translation()\n      : translation\n\n    if (nextPosition.x < left) {\n      nextPosition.x = left\n    }\n    if (nextPosition.x > right) {\n      nextPosition.x = right\n    }\n    if (nextPosition.y < top) {\n      nextPosition.y = top\n    }\n    if (nextPosition.y > bottom) {\n      nextPosition.y = bottom\n    }\n\n    return nextPosition\n  }\n\n  plugin.addPipe(context => {\n    if (!context || typeof context !== 'object' || !('type' in context)) return context\n    if (scaling && context.type === 'zoom') {\n      return {\n        ...context,\n        data: {\n          ...context.data,\n          zoom: restrictZoom(context.data.zoom)\n        }\n      }\n    }\n    if (translation && context.type === 'zoomed') {\n      const position = restrictPosition(plugin.area.transform)\n\n      plugin.area.translate(position.x, position.y)\n    }\n    if (translation && context.type === 'translate') {\n      return {\n        ...context,\n        data: {\n          ...context.data,\n          position: restrictPosition(context.data.position)\n        }\n      }\n    }\n    return context\n  })\n}\n", "import { BaseSchemes, GetSchemes, NodeEditor, NodeId } from 'rete'\n\nimport { BaseArea, BaseAreaPlugin } from '../base'\n\ntype Schemes = GetSchemes<BaseSchemes['Node'] & { selected?: boolean }, any>\n\n/**\n * Selector's accumulate function, activated when the ctrl key is pressed\n */\nexport function accumulateOnCtrl() {\n  let pressed = false\n\n  function keydown(e: KeyboardEvent) {\n    if (e.key === 'Control') pressed = true\n  }\n  function keyup(e: KeyboardEvent) {\n    if (e.key === 'Control') pressed = false\n  }\n\n  document.addEventListener('keydown', keydown)\n  document.addEventListener('keyup', keyup)\n\n  return {\n    active() {\n      return pressed\n    },\n    destroy() {\n      document.removeEventListener('keydown', keydown)\n      document.removeEventListener('keyup', keyup)\n    }\n  }\n}\n\nexport type SelectorEntity = { label: string, id: string, unselect(): void, translate(dx: number, dy: number): void }\n\n/**\n * Selector class. Used to collect selected entities (nodes, connections, etc.) and synchronize them (select, unselect, translate, etc.).\n * Can be extended to add custom functionality.\n */\nexport class Selector<E extends SelectorEntity> {\n  entities = new Map<string, E>()\n  pickId: string | null = null\n\n  isSelected(entity: Pick<E, 'label' | 'id'>) {\n    return this.entities.has(`${entity.label}_${entity.id}`)\n  }\n\n  add(entity: E, accumulate: boolean) {\n    if (!accumulate) this.unselectAll()\n    this.entities.set(`${entity.label}_${entity.id}`, entity)\n  }\n\n  remove(entity: Pick<E, 'label' | 'id'>) {\n    const id = `${entity.label}_${entity.id}`\n    const item = this.entities.get(id)\n\n    if (item) {\n      this.entities.delete(id)\n      item.unselect()\n    }\n  }\n\n  unselectAll() {\n    [...Array.from(this.entities.values())].forEach(item => this.remove(item))\n  }\n\n  translate(dx: number, dy: number) {\n    this.entities.forEach(item => !this.isPicked(item) && item.translate(dx, dy))\n  }\n\n  pick(entity: Pick<E, 'label' | 'id'>) {\n    this.pickId = `${entity.label}_${entity.id}`\n  }\n\n  release() {\n    this.pickId = null\n  }\n\n  isPicked(entity: Pick<E, 'label' | 'id'>) {\n    return this.pickId === `${entity.label}_${entity.id}`\n  }\n}\n\n/**\n * Selector factory, uses default Selector class\n * @returns Selector instance\n */\nexport function selector<E extends SelectorEntity>() {\n  return new Selector<E>()\n}\n\n/**\n * Accumulating interface, used to determine whether to accumulate entities on selection\n */\nexport type Accumulating = {\n  active(): boolean\n}\n\nexport type Selectable = ReturnType<typeof selector>\n\n/**\n * Selectable nodes extension. Adds the ability to select nodes in the area.\n * @param base BaseAreaPlugin instance\n * @param core Selectable instance\n * @param options.accumulating Accumulating interface\n * @listens nodepicked\n * @listens nodetranslated\n * @listens pointerdown\n * @listens pointermove\n * @listens pointerup\n */\nexport function selectableNodes<T>(base: BaseAreaPlugin<Schemes, T>, core: Selectable, options: { accumulating: Accumulating }) {\n  let editor: null | NodeEditor<Schemes> = null\n  const area = base as BaseAreaPlugin<Schemes, BaseArea<Schemes>>\n  const getEditor = () => editor || (editor = area.parentScope<NodeEditor<Schemes>>(NodeEditor))\n\n  let twitch: null | number = 0\n\n  function selectNode(node: Schemes['Node']) {\n    if (!node.selected) {\n      node.selected = true\n      area.update('node', node.id)\n    }\n  }\n\n  function unselectNode(node: Schemes['Node']) {\n    if (node.selected) {\n      node.selected = false\n      area.update('node', node.id)\n    }\n  }\n  /**\n   * Select node programmatically\n   * @param nodeId Node id\n   * @param accumulate Whether to accumulate nodes on selection\n   */\n  function add(nodeId: NodeId, accumulate: boolean) {\n    const node = getEditor().getNode(nodeId)\n\n    if (!node) return\n\n    core.add({\n      label: 'node',\n      id: node.id,\n      translate(dx, dy) {\n        const view = area.nodeViews.get(node.id)\n        const current = view?.position\n\n        if (current) {\n          view.translate(current.x + dx, current.y + dy)\n        }\n      },\n      unselect() {\n        unselectNode(node)\n      }\n    }, accumulate)\n    selectNode(node)\n  }\n  /**\n   * Unselect node programmatically\n   * @param nodeId Node id\n   */\n  function remove(nodeId: NodeId) {\n    core.remove({ id: nodeId, label: 'node' })\n  }\n\n  // eslint-disable-next-line max-statements, complexity\n  area.addPipe(context => {\n    if (!context || typeof context !== 'object' || !('type' in context)) return context\n\n    if (context.type === 'nodepicked') {\n      const pickedId = context.data.id\n      const accumulate = options.accumulating.active()\n\n      core.pick({ id: pickedId, label: 'node' })\n      twitch = null\n      add(pickedId, accumulate)\n    } else if (context.type === 'nodetranslated') {\n      const { id, position, previous } = context.data\n      const dx = position.x - previous.x\n      const dy = position.y - previous.y\n\n      if (core.isPicked({ id, label: 'node' })) core.translate(dx, dy)\n    } else if (context.type === 'pointerdown') {\n      twitch = 0\n    } else if (context.type === 'pointermove') {\n      if (twitch !== null) twitch++\n    } else if (context.type === 'pointerup') {\n      if (twitch !== null && twitch < 4) {\n        core.unselectAll()\n      }\n      twitch = null\n    }\n    return context\n  })\n\n  return {\n    select: add,\n    unselect: remove\n  }\n}\n\n", "import { BaseSchemes, ClassicPreset as Classic, GetSchemes, NodeEditor } from 'rete'\n\nimport { BaseAreaPlugin } from '../base'\n\ntype Scheme = GetSchemes<Classic.Node, Classic.Connection<Classic.Node, Classic.Node>>\ntype Visible<S extends Scheme> = (props: { hasAnyConnection: boolean, input: NonNullable<S['Node']['inputs'][string]> }) => boolean\n\n/**\n * Show input control extension. It will show the input's control when there is no connection and hide it when there is a connection.\n * @param area The base area plugin\n * @param visible The visible function\n * @listens connectioncreated\n * @listens connectionremoved\n */\nexport function showInputControl<S extends Scheme>(area: BaseAreaPlugin<BaseSchemes, any>, visible?: Visible<S>) {\n  let editor: null | NodeEditor<S> = null\n  const getEditor = () => editor || (editor = area.parentScope<NodeEditor<S>>(NodeEditor))\n\n  function updateInputControlVisibility(target: string, targetInput: string) {\n    const node = getEditor().getNode(target)\n\n    if (!node) return\n\n    const input = (node.inputs as Record<string, S['Node']['inputs'][string] | undefined>)[targetInput]\n\n    if (!input) throw new Error('cannot find input')\n\n    const previous = input.showControl\n    const connections = getEditor().getConnections()\n    const hasAnyConnection = Boolean(connections.find(connection => {\n      return connection.target === target && connection.targetInput === targetInput\n    }))\n\n    input.showControl = visible ? visible({ hasAnyConnection, input }) : !hasAnyConnection\n\n    if (input.showControl !== previous) {\n      area.update('node', node.id)\n    }\n  }\n\n  area.addPipe(context => {\n    if (context.type === 'connectioncreated' || context.type === 'connectionremoved') {\n      updateInputControlVisibility(context.data.target, context.data.targetInput)\n    }\n    return context\n  })\n}\n", "import { BaseSchemes } from 'rete'\n\nimport { BaseArea, BaseAreaPlugin } from '../base'\n\n/**\n * Snap grid extension parameters\n */\nexport type Params = {\n  /** The grid size */\n  size?: number\n  /** Whether to snap on node drag */\n  dynamic?: boolean\n}\n\n/**\n * Snap grid extension\n * @param base The base area plugin\n * @param params The snap parameters\n * @listens nodetranslate\n * @listens nodedragged\n */\nexport function snapGrid<Schemes extends BaseSchemes, K>(base: BaseAreaPlugin<Schemes, K>, params?: Params) {\n  const area = base as BaseAreaPlugin<Schemes, BaseArea<Schemes>>\n  const size = typeof params?.size === 'undefined' ? 16 : params.size\n  const dynamic = typeof params?.dynamic === 'undefined' ? true : params.dynamic\n\n  function snap(value: number) {\n    return Math.round(value / size) * size\n  }\n\n  area.addPipe(context => {\n    if (!context || typeof context !== 'object' || !('type' in context)) return context\n    if (dynamic && context.type === 'nodetranslate') {\n      const { position } = context.data\n      const x = snap(position.x)\n      const y = snap(position.y)\n\n      return {\n        ...context,\n        data: {\n          ...context.data,\n          position: { x, y }\n        }\n      }\n    }\n    if (!dynamic && context.type === 'nodedragged') {\n      const view = area.nodeViews.get(context.data.id)\n\n      if (view) {\n        const { x, y } = view.position\n\n        view.translate(snap(x), snap(y))\n      }\n    }\n    return context\n  })\n}\n", "import { NodeEditor } from 'rete'\n\nimport { AreaPlugin } from '..'\nimport { getBoundingBox } from '../utils'\nimport { NodeRef, SchemesWithSizes } from './shared/types'\nimport { getNodesRect } from './shared/utils'\n\n/**\n * Zoom extension parameters\n */\nexport type Params = {\n  /** Set gap between nodes and the viewport border */\n  scale?: number\n}\n\n/**\n * Zooms the area to fit the given nodes\n * @param plugin The area plugin\n * @param nodes The nodes to fit\n * @param params The zoom parameters\n */\n// eslint-disable-next-line max-statements, max-len\nexport async function zoomAt<Schemes extends SchemesWithSizes, K>(plugin: AreaPlugin<Schemes, K>, nodes: NodeRef<Schemes>[], params?: Params) {\n  const { scale = 0.9 } = params || {}\n  const editor = plugin.parentScope<NodeEditor<Schemes>>(NodeEditor)\n  const list = nodes.map(node => typeof node === 'object' ? node : editor.getNode(node))\n  const rects = getNodesRect(list, plugin.nodeViews)\n  const boundingBox = getBoundingBox(rects)\n  const [w, h] = [plugin.container.clientWidth, plugin.container.clientHeight]\n  const [kw, kh] = [w / boundingBox.width, h / boundingBox.height]\n  const k = Math.min(kh * scale, kw * scale, 1)\n\n  plugin.area.transform.x = w / 2 - boundingBox.center.x * k\n  plugin.area.transform.y = h / 2 - boundingBox.center.y * k\n  await plugin.area.zoom(k, 0, 0)\n}\n", "/**\n * Area extensions\n * @priority 7\n * @module Extensions\n */\nexport { getBoundingBox } from './bounding-box'\nexport { simpleNodesOrder } from './order'\nexport type { Params as Restrictor } from './restrictor'\nexport { restrictor } from './restrictor'\nexport { accumulateOnCtrl, selectableNodes, Selector, selector } from './selectable'\nexport { showInputControl } from './show-input-control'\nexport type { Params as SnapGrid } from './snap'\nexport { snapGrid } from './snap'\nexport type { Params as ZoomAt } from './zoom-at'\nexport { zoomAt } from './zoom-at'\n", "import { BaseSchemes, ConnectionId, NodeId, Root } from 'rete'\n\nimport { Area, TranslateEventParams, ZoomEventParams } from './area'\nimport { BaseArea, BaseAreaPlugin } from './base'\nimport { ConnectionView } from './connection-view'\nimport { ElementsHolder } from './elements-holder'\nimport { NodeView } from './node-view'\nimport { GetRenderTypes, Position, RenderMeta } from './types'\n\nexport { Area } from './area'\nexport type { BaseArea } from './base'\nexport { BaseAreaPlugin } from './base'\nexport { Drag } from './drag'\nexport * as AreaExtensions from './extensions'\nexport { NodeView } from './node-view'\nexport type { RenderSignal } from './types'\nexport type { PointerListener } from './utils'\nexport { usePointerListener } from './utils'\nexport { Zoom } from './zoom'\n\n/**\n * A union of all possible signals that can be emitted by the area\n * @priority 9\n */\nexport type Area2D<Schemes extends BaseSchemes> =\n  | BaseArea<Schemes>\n  | { type: 'translate', data: TranslateEventParams }\n  | { type: 'translated', data: TranslateEventParams }\n  | { type: 'zoom', data: ZoomEventParams }\n  | { type: 'zoomed', data: ZoomEventParams }\n  | { type: 'resized', data: { event: Event } }\n\nexport type Area2DInherited<Schemes extends BaseSchemes, ExtraSignals = never> = [Area2D<Schemes> | ExtraSignals, Root<Schemes>]\n\n/**\n * A plugin that provides a 2D area for nodes and connections\n * @priority 8\n * @emits render\n * @emits rendered\n * @emits unmount\n * @listens nodecreated\n * @listens noderemoved\n * @listens connectioncreated\n * @listens connectionremoved\n */\nexport class AreaPlugin<Schemes extends BaseSchemes, ExtraSignals = never> extends BaseAreaPlugin<Schemes, Area2D<Schemes> | ExtraSignals> {\n  public nodeViews = new Map<NodeId, NodeView>()\n  public connectionViews = new Map<ConnectionId, ConnectionView>()\n  public area: Area\n  private elements = new ElementsHolder<HTMLElement, Extract<Area2D<Schemes>, { type: 'render' }>['data'] & RenderMeta>()\n\n  constructor(public container: HTMLElement) {\n    super('area')\n    container.style.overflow = 'hidden'\n    container.addEventListener('contextmenu', this.onContextMenu)\n\n    // eslint-disable-next-line max-statements\n    this.addPipe(context => {\n      if (!context || !(typeof context === 'object' && 'type' in context)) return context\n      if (context.type === 'nodecreated') {\n        this.addNodeView(context.data)\n      }\n      if (context.type === 'noderemoved') {\n        this.removeNodeView(context.data.id)\n      }\n      if (context.type === 'connectioncreated') {\n        this.addConnectionView(context.data)\n      }\n      if (context.type === 'connectionremoved') {\n        this.removeConnectionView(context.data.id)\n      }\n      if (context.type === 'render') {\n        this.elements.set(context.data)\n      }\n      if (context.type === 'unmount') {\n        this.elements.delete(context.data.element)\n      }\n      return context\n    })\n    this.area = new Area(\n      container,\n      {\n        zoomed: params => this.emit({ type: 'zoomed', data: params }),\n        pointerDown: (position, event) => this.emit({ type: 'pointerdown', data: { position, event } }),\n        pointerMove: (position, event) => this.emit({ type: 'pointermove', data: { position, event } }),\n        pointerUp: (position, event) => this.emit({ type: 'pointerup', data: { position, event } }),\n        resize: event => this.emit({ type: 'resized', data: { event } }),\n        translated: params => this.emit({ type: 'translated', data: params }),\n        reordered: element => this.emit({ type: 'reordered', data: { element } })\n      },\n      {\n        translate: params => this.emit({ type: 'translate', data: params }),\n        zoom: params => this.emit({ type: 'zoom', data: params })\n      }\n    )\n  }\n\n  private onContextMenu = (event: MouseEvent) => {\n    this.emit({ type: 'contextmenu', data: { event, context: 'root' } })\n  }\n\n  public addNodeView(node: Schemes['Node']) {\n    const { id } = node\n    const view = new NodeView(\n      () => this.area.transform.k,\n      {\n        picked: () => this.emit({ type: 'nodepicked', data: { id } }),\n        translated: data => this.emit({ type: 'nodetranslated', data: { id, ...data } }),\n        dragged: () => this.emit({ type: 'nodedragged', data: node }),\n        contextmenu: event => this.emit({ type: 'contextmenu', data: { event, context: node } }),\n        resized: ({ size }) => this.emit({ type: 'noderesized', data: { id: node.id, size } })\n      },\n      {\n        translate: data => this.emit({ type: 'nodetranslate', data: { id, ...data } }),\n        resize: ({ size }) => this.emit({ type: 'noderesize', data: { id: node.id, size } })\n      }\n    )\n\n    this.nodeViews.set(id, view)\n    this.area.content.add(view.element)\n\n    this.emit({\n      type: 'render',\n      data: { element: view.element, type: 'node', payload: node }\n    })\n\n    return view\n  }\n\n  public removeNodeView(id: NodeId) {\n    const view = this.nodeViews.get(id)\n\n    if (view) {\n      this.emit({ type: 'unmount', data: { element: view.element } })\n      this.nodeViews.delete(id)\n      this.area.content.remove(view.element)\n    }\n  }\n\n  public addConnectionView(connection: Schemes['Connection']) {\n    const view = new ConnectionView({\n      contextmenu: event => this.emit({ type: 'contextmenu', data: { event, context: connection } })\n    })\n\n    this.connectionViews.set(connection.id, view)\n    this.area.content.add(view.element)\n\n    this.emit({\n      type: 'render',\n      data: { element: view.element, type: 'connection', payload: connection }\n    })\n\n    return view\n  }\n\n  public removeConnectionView(id: ConnectionId) {\n    const view = this.connectionViews.get(id)\n\n    if (view) {\n      this.emit({ type: 'unmount', data: { element: view.element } })\n      this.connectionViews.delete(id)\n      this.area.content.remove(view.element)\n    }\n  }\n\n  /**\n   * Force update rendered element by id (node, connection, etc.)\n   * @param type Element type\n   * @param id Element id\n   * @emits render\n   */\n  public async update(type: GetRenderTypes<Area2D<Schemes>> | GetRenderTypes<ExtraSignals>, id: string) {\n    const data = this.elements.get(type, id)\n\n    if (data) await this.emit({ type: 'render', data } as Area2D<Schemes>)\n  }\n\n  /**\n   * Resize node\n   * @param id Node id\n   * @param width Desired width\n   * @param height Desired height\n   */\n  public async resize(id: NodeId, width: number, height: number) {\n    const view = this.nodeViews.get(id)\n\n    if (view) return await view.resize(width, height)\n  }\n\n  /**\n   * Translate node to position\n   * @param id Node id\n   * @param position Position\n   */\n  public async translate(id: NodeId, { x, y }: Position) {\n    const view = this.nodeViews.get(id)\n\n    if (view) return await view.translate(x, y)\n  }\n\n  /**\n   * Destroy all views and remove all event listeners\n   */\n  public destroy() {\n    this.container.removeEventListener('contextmenu', this.onContextMenu)\n    Array.from(this.connectionViews.keys()).forEach(id => this.removeConnectionView(id))\n    Array.from(this.nodeViews.keys()).forEach(id => this.removeNodeView(id))\n    this.area.destroy()\n  }\n}\n"],
  "mappings": "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",
  "names": ["Content", "reordered", "_classCallCheck", "holder", "document", "createElement", "style", "transformOrigin", "_createClass", "key", "value", "getPointerFrom", "event", "_this$holder$getBound", "getBoundingClientRect", "left", "top", "x", "clientX", "y", "clientY", "add", "element", "appendChild", "_reorder", "_asyncToGenerator", "_regeneratorRuntime", "mark", "_callee", "target", "next", "wrap", "_callee$", "_context", "prev", "contains", "Error", "insertBefore", "stop", "reorder", "_x", "_x2", "apply", "arguments", "remove", "removeChild", "usePointerListener", "handlers", "move", "up", "window", "removeEventListener", "down", "addEventListener", "destroy", "min", "arr", "length", "Math", "_toConsumableArray", "max", "getBoundingBox", "rects", "map", "rect", "position", "right", "width", "bottom", "height", "abs", "center", "Drag", "guards", "_this", "_defineProperty", "e", "stopPropagation", "pointerStart", "pageX", "pageY", "startPosition", "_objectSpread", "config", "getCurrentPosition", "events", "start", "preventDefault", "delta", "zoom", "getZoom", "translate", "drag", "pointerType", "button", "initialize", "touchAction", "pointerListener", "Zoom", "intensity", "_this$element$getBoun", "isNegative", "deltaY", "ox", "oy", "onzoom", "pointers", "push", "p", "pointerId", "isTranslating", "_this$element$getBoun2", "_this$getTouches", "getTouches", "cx", "cy", "distance", "previous", "filter", "_this$element$getBoun3", "container", "wheel", "dblclick", "touches", "_ref", "x1", "y1", "_ref2", "x2", "y2", "sqrt", "pow", "Area", "k", "setPointerFrom", "pointerDown", "pointer", "pointerMove", "pointerUp", "resize", "zoomHandler", "source", "transform", "update", "content", "setZoomHandler", "setDragHandler", "pointerdown", "pointermove", "pointerup", "_this$transform", "concat", "_this2", "dragHandler", "onTranslate", "onZoom", "_this$content$getPoin", "_translate", "result", "sent", "abrupt", "data", "translated", "_zoom2", "_callee2", "d", "_args2", "_callee2$", "_context2", "undefined", "zoomed", "_x3", "innerHTML", "BaseAreaPlugin", "_Scope", "_inherits", "_super", "_createSuper", "Scope", "ConnectionView", "contextmenu", "ElementsHolder", "WeakMap", "Map", "set", "context", "type", "payload", "id", "views", "viewsElements", "get", "_delete", "_view$payload", "view", "NodeView", "translation", "size", "el", "children", "item", "HTMLElement", "resized", "_x4", "picked", "dragged", "getNodesRect", "nodes", "node", "clientWidth", "clientHeight", "plugin", "editor", "parentScope", "NodeEditor", "list", "_typeof", "getNode", "nodeViews", "getBBox", "simpleNodesOrder", "base", "area", "addPipe", "connectionViews", "firstChild", "restrictor", "params", "scaling", "restrictZoom", "restrictPosition", "nextPosition", "accumulateOnCtrl", "pressed", "keydown", "keyup", "active", "Selector", "isSelected", "entity", "entities", "has", "label", "accumulate", "unselectAll", "unselect", "Array", "from", "values", "forEach", "dx", "dy", "isPicked", "pick", "pickId", "release", "selector", "selectableNodes", "core", "options", "getEditor", "twitch", "selectNode", "selected", "unselectNode", "nodeId", "current", "pickedId", "accumulating", "_context$data", "select", "showInputControl", "visible", "updateInputControlVisibility", "targetInput", "input", "inputs", "showControl", "connections", "getConnections", "hasAnyConnection", "Boolean", "find", "connection", "snapGrid", "dynamic", "snap", "round", "_view$position", "zoomAt", "_zoomAt", "_ref$scale", "scale", "boundingBox", "w", "h", "kw", "kh", "AreaPlugin", "_BaseAreaPlugin", "call", "_assertThisInitialized", "emit", "overflow", "onContextMenu", "addNodeView", "removeNodeView", "addConnectionView", "removeConnectionView", "elements", "_this3", "_update", "_resize", "_x5", "_callee3", "_ref3", "_callee3$", "_context3", "_x6", "_x7", "_this4", "keys"]
}
